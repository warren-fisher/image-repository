[{"/home/warren/programming/shopify-backend-challenge/frontend/src/index.js":"1","/home/warren/programming/shopify-backend-challenge/frontend/src/App.js":"2","/home/warren/programming/shopify-backend-challenge/frontend/src/useToken.js":"3","/home/warren/programming/shopify-backend-challenge/frontend/src/upload/upload.js":"4","/home/warren/programming/shopify-backend-challenge/frontend/src/albums/album.js":"5","/home/warren/programming/shopify-backend-challenge/frontend/src/gallery/gallery.js":"6","/home/warren/programming/shopify-backend-challenge/frontend/src/login/login.js":"7","/home/warren/programming/shopify-backend-challenge/frontend/src/config.js":"8","/home/warren/programming/shopify-backend-challenge/frontend/src/image.js":"9"},{"size":218,"mtime":1632106911542,"results":"10","hashOfConfig":"11"},{"size":1890,"mtime":1632106340058,"results":"12","hashOfConfig":"11"},{"size":687,"mtime":1632102934174,"results":"13","hashOfConfig":"11"},{"size":2957,"mtime":1632102934174,"results":"14","hashOfConfig":"11"},{"size":1199,"mtime":1632106310074,"results":"15","hashOfConfig":"11"},{"size":810,"mtime":1632102934174,"results":"16","hashOfConfig":"11"},{"size":4774,"mtime":1632102934174,"results":"17","hashOfConfig":"11"},{"size":124,"mtime":1632106873814,"results":"18","hashOfConfig":"11"},{"size":668,"mtime":1632107262418,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},"brkxub",{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27","usedDeprecatedRules":"22"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"30","usedDeprecatedRules":"22"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"22"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"22"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"22"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/home/warren/programming/shopify-backend-challenge/frontend/src/index.js",[],["44","45"],"/home/warren/programming/shopify-backend-challenge/frontend/src/App.js",[],"/home/warren/programming/shopify-backend-challenge/frontend/src/useToken.js",["46"],"import {useState} from 'react';\n\n/**\n * Custom useState hook for storing user tokens in session storage\n */\nexport default function useToken() {\n\n    const getToken = () => {\n        const JSONToken = sessionStorage.getItem('token');\n\n        if (JSONToken != \"undefined\") {\n            const token = JSON.parse(JSONToken);\n            return token?.token\n        }\n\n        return undefined;\n    }\n\n    const [token, setToken] = useState(getToken());\n\n    const saveToken = (token) => {\n\n        if (token === undefined) {\n            token = '';\n        }\n\n        sessionStorage.setItem('token', JSON.stringify(token));\n        setToken(token);\n    }\n\n    return [token, saveToken];\n}","/home/warren/programming/shopify-backend-challenge/frontend/src/upload/upload.js",["47","48"],"import React, {useState} from 'react';\n\nimport api_endpoint from '../config.js';\n\n/**\n *\n * @param {*} props.token, the user token\n */\nexport default function Upload(props) {\n    const [selectedFiles, setSelectedFiles] = useState([]);\n    const [albumName, setAlbumName] = useState();\n    const [isPrivate, setPrivate] = useState(false);\n\n    const handleSubmission = e => {\n        e.preventDefault();\n        const formData = new FormData();\n\n        if (selectedFiles.length == 0) {\n            // what to do if no files?\n\n        }\n        else if (selectedFiles.length == 1) {\n            formData.append(\"File\", selectedFiles[0]);\n            formData.append(\"private\", isPrivate);\n\n            fetch(`${api_endpoint}/post/upload`, {\n                method: 'POST',\n                body: formData,\n                headers: { 'token': props.token }\n            })\n                .then(response => response.json())\n                .then(data => console.log(data))\n                .catch(error => console.error(error));\n\n        } else {\n            for (var i = 0; i < selectedFiles.length; i++) {\n                formData.append(\"album[]\", selectedFiles[i]);\n            }\n\n            formData.append(\"album_name\", albumName);\n            formData.append(\"private\", isPrivate);\n\n            fetch(`${api_endpoint}/post/upload/album`, {\n                method: 'POST',\n                body: formData,\n                headers: {'token': props.token}\n            })\n                .then(response => response.json())\n                .then(data => console.log(data))\n                .catch(error => console.error(error));\n        }\n    }\n\n\n    return (\n        <div id=\"upload\">\n            <h1> Upload new image(s)</h1>\n            <form method=\"post\" enctype=\"multipart/form-data\">\n                <label>\n                    <p>Select file(s) to upload</p>\n                    <input type=\"file\" name=\"file\" multiple=\"true\" onChange={e => setSelectedFiles(e.target.files)} />\n                </label>\n\n                <label>\n                    <p>If you are submitting more than one file please include an album name (alphanumeric characters only)</p>\n                    <input type=\"text\" name=\"albumname\" onChange={e => setAlbumName(e.target.value)} />\n                </label>\n\n                {/* User can only view private file toggle if they are logged in */}\n                {   props.token ?\n                    <label>\n                        <p>Would you like your file(s) to be private?</p>\n                        <input type=\"checkbox\" name=\"private\" onChange={e => setPrivate(e.target.value)} />\n                    </label>\n                    :\n                    true\n                }\n\n                <label>\n                    <p>Upload your file(s) when you are ready</p>\n                    <input type=\"submit\" value=\"Upload\" onClick={handleSubmission} />\n                </label>\n            </form>\n        </div>\n    )\n}","/home/warren/programming/shopify-backend-challenge/frontend/src/albums/album.js",["49"],"import React, { useEffect, useState, useCallback } from 'react';\nimport Image from '../image.js';\n\nimport api_endpoint from '../config.js';\n\n/**\n * \n * @param {str} props.token, the user token\n */\nexport default function Album(props) {\n\n    const [uploadedAlbums, setUploadedAlbums] = useState([]);\n\n    const getState = useCallback(\n        () => {\n            return fetch(`${api_endpoint}/get/albums`, {\n                headers: {\n                    'token': props.token\n                }\n            });\n        },\n        [props.token]);\n\n    useEffect(() => {\n        getState()\n            .then(response => response.json())\n            .then(data => setUploadedAlbums(data))\n            .catch(error => console.error(error));\n    }, [useCallback])\n\n    let albumKeys = Object.keys(uploadedAlbums);\n\n    return (\n\n        <div id=\"albums\">\n\n            { albumKeys.map((album, i) => {\n\n                return (\n                    <div className=\"album\" key={i}>\n                    {uploadedAlbums[album].map((image_name, j) => <Image image_name={image_name} key={j} album_name={album}/>)}\n                    </div>\n                );\n\n            }\n            )}\n\n        </div>\n    );\n}","/home/warren/programming/shopify-backend-challenge/frontend/src/gallery/gallery.js",["50"],"import React, { useEffect , useState} from 'react';\nimport Image from '../image.js';\n\nimport api_endpoint from '../config.js';\n\n/**\n *\n * @param {str} props.token, the user token\n */\nexport default function Gallery(props) {\n\n    const [uploadedFiles, setUploadedFiles] = useState([]);\n\n\n    const getState = () => {\n        return fetch(`${api_endpoint}/get/files`, {\n            headers: {\n                'token': props.token\n            }\n        });\n    }\n\n    useEffect(() => {\n        getState()\n            .then(response => response.json())\n            .then(data => setUploadedFiles(data))\n            .catch(error => console.error(error));\n    }, [])\n\n\n    return (\n        <div id=\"imgs\">\n            { uploadedFiles.map((object, i) => <Image image_name={object} key={i}/>) }\n        </div>\n    );\n}","/home/warren/programming/shopify-backend-challenge/frontend/src/login/login.js",["51","52","53","54"],"import { useEffect, useState } from \"react\";\nimport React from 'react';\nimport {useHistory} from \"react-router-dom\";\n\nimport './login.css'\n\nimport api_endpoint from '../config.js';\n\nasync function loginUser(username, hash) {\n\n    const formData = new FormData();\n    formData.append('user', username);\n    formData.append('hash', hash);\n\n    return fetch(`${api_endpoint}/post/login`, {\n        method: 'POST',\n        body: formData,\n    }).then(response => response.json());\n}\n\nasync function registerUser(username, hash) {\n\n    const formData = new FormData();\n    formData.append('user', username);\n    formData.append('hash', hash);\n\n    return fetch(`${api_endpoint}/post/register`, {\n        method: 'POST',\n        body: formData,\n    }).then(response => response.json());\n}\n\nasync function getHash(password) {\n    let hash = await crypto.subtle.digest(\"SHA-256\", new TextEncoder().encode(password));\n    hash = new Uint8Array(hash);\n\n    let final_hash = '';\n    for (let char of hash) {\n        final_hash += btoa(String.fromCharCode(char)).slice(0,2);\n    }\n    return final_hash;\n}\n\nasync function checkUser(username) {\n    return fetch(`${api_endpoint}/get/username/${username}`).then(response => response.json())\n}\n\n/**\n * React component to handle logging in to the application\n *\n * @param {func} props.setToken, function to set the token\n * @param {func} props.setUser, function to set the logged in user's name\n *                  Only purpose is for visual display, the token is used for identity verification\n */\nexport default function Login(props) {\n\n    // State for username and password\n    const [username, setUserName] = useState();\n    const [password, setPassword] = useState();\n\n    // State for checking if username & password are valid\n    const [validUser, setValidUser] = useState(true);\n    const [validPassword, setValidPassword] = useState(true);\n\n    // History (for redirecting user upon login)\n    const hist = useHistory();\n\n    const handleSubmit = async e => {\n        // We don't want the form to submit since we have our own custom methods of doing this\n        e.preventDefault();\n\n        let hash = await getHash(password);\n\n        const token = await loginUser(username, hash);\n\n        // User did not register succesfully\n        if (typeof (token) != 'string') {\n            setValidPassword(false);\n            setValidUser(false);\n            return;\n        }\n\n        // User logged in succesfully\n        props.setToken(token);\n        props.setUser(username);\n\n        hist.push(\"/\");\n    }\n\n    // TODO: updating of states is one step behind (everywhere??)\n    const handleRegister = async e => {\n        // We don't want the form to submit since we have our own custom methods of doing this\n        e.preventDefault();\n\n        let availableUser = await checkUser(username);\n        let pswValid = passwordCheck();\n        setValidPassword(pswValid);\n\n        if (availableUser['available'] === true) {\n            setValidUser(true);\n        } else {\n            setValidUser(false);\n        }\n\n        // Dont use state (validPassword, validUser) because it will be one update behind this\n        // Instead use the values found\n        if (pswValid && availableUser['available']) {\n            let hash = await getHash(password);\n            let token = await registerUser(username, hash);\n\n            // User did not register succesfully\n            if (typeof(token) != 'string') {\n                alert(\"problem registering. Try again\");\n                return;\n            }\n\n            // Users succesfully registered\n            props.setToken(token);\n            props.setUser(username);\n            hist.push(\"/\");\n        }\n    }\n\n    const passwordCheck = () => {\n\n        if (password == undefined || password.length < 8) {\n            return false;\n        } else {\n            return true;\n        }\n    }\n\n    return (\n        <div id=\"login-wrapper\">\n            <h3> Please login </h3>\n\n            <form>\n\n                <label>\n                    <p>Username</p>\n                    <input className={validUser == true ? \"valid\" : \"invalid\"} type=\"text\" onChange={e => setUserName(e.target.value)}/>\n                </label>\n\n                <label>\n                    <p>Enter a password atleast 8 characters long</p>\n                    <input className={validPassword == true ? \"valid\" : \"invalid\"} type=\"text\" onChange={e => setPassword(e.target.value)}/>\n                </label>\n\n                <div>\n                    <button type=\"submit\" onClick={handleSubmit}>Login</button>\n                </div>\n                <div>\n                    <button type=\"submit\" onClick={handleRegister}>Register</button>\n                </div>\n\n            </form>\n\n\n        </div>\n    );\n}","/home/warren/programming/shopify-backend-challenge/frontend/src/config.js",[],"/home/warren/programming/shopify-backend-challenge/frontend/src/image.js",["55"],{"ruleId":"56","replacedBy":"57"},{"ruleId":"58","replacedBy":"59"},{"ruleId":"60","severity":1,"message":"61","line":11,"column":23,"nodeType":"62","messageId":"63","endLine":11,"endColumn":25},{"ruleId":"60","severity":1,"message":"64","line":18,"column":34,"nodeType":"62","messageId":"63","endLine":18,"endColumn":36},{"ruleId":"60","severity":1,"message":"64","line":22,"column":39,"nodeType":"62","messageId":"63","endLine":22,"endColumn":41},{"ruleId":"65","severity":1,"message":"66","line":29,"column":8,"nodeType":"67","endLine":29,"endColumn":21,"suggestions":"68"},{"ruleId":"65","severity":1,"message":"69","line":28,"column":8,"nodeType":"67","endLine":28,"endColumn":10,"suggestions":"70"},{"ruleId":"71","severity":1,"message":"72","line":1,"column":10,"nodeType":"73","messageId":"74","endLine":1,"endColumn":19},{"ruleId":"60","severity":1,"message":"64","line":126,"column":22,"nodeType":"62","messageId":"63","endLine":126,"endColumn":24},{"ruleId":"60","severity":1,"message":"64","line":141,"column":49,"nodeType":"62","messageId":"63","endLine":141,"endColumn":51},{"ruleId":"60","severity":1,"message":"64","line":146,"column":53,"nodeType":"62","messageId":"63","endLine":146,"endColumn":55},{"ruleId":"75","severity":1,"message":"76","line":21,"column":9,"nodeType":"77","endLine":21,"endColumn":51},"no-native-reassign",["78"],"no-negated-in-lhs",["79"],"eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","Expected '===' and instead saw '=='.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getState'. Either include it or remove the dependency array. Outer scope values like 'useCallback' aren't valid dependencies because mutating them doesn't re-render the component.","ArrayExpression",["80"],"React Hook useEffect has a missing dependency: 'getState'. Either include it or remove the dependency array.",["81"],"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","no-global-assign","no-unsafe-negation",{"desc":"82","fix":"83"},{"desc":"82","fix":"84"},"Update the dependencies array to be: [getState]",{"range":"85","text":"86"},{"range":"87","text":"86"},[742,755],"[getState]",[657,659]]