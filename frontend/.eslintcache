[{"/home/warren/programming/shopify-backend-challenge/frontend/src/index.js":"1","/home/warren/programming/shopify-backend-challenge/frontend/src/App.js":"2","/home/warren/programming/shopify-backend-challenge/frontend/src/useToken.js":"3","/home/warren/programming/shopify-backend-challenge/frontend/src/upload/upload.js":"4","/home/warren/programming/shopify-backend-challenge/frontend/src/albums/album.js":"5","/home/warren/programming/shopify-backend-challenge/frontend/src/gallery/gallery.js":"6","/home/warren/programming/shopify-backend-challenge/frontend/src/login/login.js":"7","/home/warren/programming/shopify-backend-challenge/frontend/src/config.js":"8","/home/warren/programming/shopify-backend-challenge/frontend/src/image.js":"9"},{"size":348,"mtime":1632153200369,"results":"10","hashOfConfig":"11"},{"size":1890,"mtime":1632106340058,"results":"12","hashOfConfig":"11"},{"size":687,"mtime":1632155208216,"results":"13","hashOfConfig":"11"},{"size":4663,"mtime":1632154276690,"results":"14","hashOfConfig":"11"},{"size":1362,"mtime":1632155138341,"results":"15","hashOfConfig":"11"},{"size":810,"mtime":1632102934174,"results":"16","hashOfConfig":"11"},{"size":4774,"mtime":1632102934174,"results":"17","hashOfConfig":"11"},{"size":124,"mtime":1632106873814,"results":"18","hashOfConfig":"11"},{"size":1024,"mtime":1632154528502,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"brkxub",{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"27","messages":"28","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"29","messages":"30","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"24"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"24"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/warren/programming/shopify-backend-challenge/frontend/src/index.js",[],"/home/warren/programming/shopify-backend-challenge/frontend/src/App.js",[],["41","42"],"/home/warren/programming/shopify-backend-challenge/frontend/src/useToken.js",["43"],"/home/warren/programming/shopify-backend-challenge/frontend/src/upload/upload.js",["44","45"],"/home/warren/programming/shopify-backend-challenge/frontend/src/albums/album.js",["46","47"],"/home/warren/programming/shopify-backend-challenge/frontend/src/gallery/gallery.js",["48"],"import React, { useEffect , useState} from 'react';\nimport Image from '../image.js';\n\nimport api_endpoint from '../config.js';\n\n/**\n *\n * @param {str} props.token, the user token\n */\nexport default function Gallery(props) {\n\n    const [uploadedFiles, setUploadedFiles] = useState([]);\n\n\n    const getState = () => {\n        return fetch(`${api_endpoint}/get/files`, {\n            headers: {\n                'token': props.token\n            }\n        });\n    }\n\n    useEffect(() => {\n        getState()\n            .then(response => response.json())\n            .then(data => setUploadedFiles(data))\n            .catch(error => console.error(error));\n    }, [])\n\n\n    return (\n        <div id=\"imgs\">\n            { uploadedFiles.map((object, i) => <Image image_name={object} key={i}/>) }\n        </div>\n    );\n}","/home/warren/programming/shopify-backend-challenge/frontend/src/login/login.js",["49","50","51","52"],"import { useEffect, useState } from \"react\";\nimport React from 'react';\nimport {useHistory} from \"react-router-dom\";\n\nimport './login.css'\n\nimport api_endpoint from '../config.js';\n\nasync function loginUser(username, hash) {\n\n    const formData = new FormData();\n    formData.append('user', username);\n    formData.append('hash', hash);\n\n    return fetch(`${api_endpoint}/post/login`, {\n        method: 'POST',\n        body: formData,\n    }).then(response => response.json());\n}\n\nasync function registerUser(username, hash) {\n\n    const formData = new FormData();\n    formData.append('user', username);\n    formData.append('hash', hash);\n\n    return fetch(`${api_endpoint}/post/register`, {\n        method: 'POST',\n        body: formData,\n    }).then(response => response.json());\n}\n\nasync function getHash(password) {\n    let hash = await crypto.subtle.digest(\"SHA-256\", new TextEncoder().encode(password));\n    hash = new Uint8Array(hash);\n\n    let final_hash = '';\n    for (let char of hash) {\n        final_hash += btoa(String.fromCharCode(char)).slice(0,2);\n    }\n    return final_hash;\n}\n\nasync function checkUser(username) {\n    return fetch(`${api_endpoint}/get/username/${username}`).then(response => response.json())\n}\n\n/**\n * React component to handle logging in to the application\n *\n * @param {func} props.setToken, function to set the token\n * @param {func} props.setUser, function to set the logged in user's name\n *                  Only purpose is for visual display, the token is used for identity verification\n */\nexport default function Login(props) {\n\n    // State for username and password\n    const [username, setUserName] = useState();\n    const [password, setPassword] = useState();\n\n    // State for checking if username & password are valid\n    const [validUser, setValidUser] = useState(true);\n    const [validPassword, setValidPassword] = useState(true);\n\n    // History (for redirecting user upon login)\n    const hist = useHistory();\n\n    const handleSubmit = async e => {\n        // We don't want the form to submit since we have our own custom methods of doing this\n        e.preventDefault();\n\n        let hash = await getHash(password);\n\n        const token = await loginUser(username, hash);\n\n        // User did not register succesfully\n        if (typeof (token) != 'string') {\n            setValidPassword(false);\n            setValidUser(false);\n            return;\n        }\n\n        // User logged in succesfully\n        props.setToken(token);\n        props.setUser(username);\n\n        hist.push(\"/\");\n    }\n\n    // TODO: updating of states is one step behind (everywhere??)\n    const handleRegister = async e => {\n        // We don't want the form to submit since we have our own custom methods of doing this\n        e.preventDefault();\n\n        let availableUser = await checkUser(username);\n        let pswValid = passwordCheck();\n        setValidPassword(pswValid);\n\n        if (availableUser['available'] === true) {\n            setValidUser(true);\n        } else {\n            setValidUser(false);\n        }\n\n        // Dont use state (validPassword, validUser) because it will be one update behind this\n        // Instead use the values found\n        if (pswValid && availableUser['available']) {\n            let hash = await getHash(password);\n            let token = await registerUser(username, hash);\n\n            // User did not register succesfully\n            if (typeof(token) != 'string') {\n                alert(\"problem registering. Try again\");\n                return;\n            }\n\n            // Users succesfully registered\n            props.setToken(token);\n            props.setUser(username);\n            hist.push(\"/\");\n        }\n    }\n\n    const passwordCheck = () => {\n\n        if (password == undefined || password.length < 8) {\n            return false;\n        } else {\n            return true;\n        }\n    }\n\n    return (\n        <div id=\"login-wrapper\">\n            <h3> Please login </h3>\n\n            <form>\n\n                <label>\n                    <p>Username</p>\n                    <input className={validUser == true ? \"valid\" : \"invalid\"} type=\"text\" onChange={e => setUserName(e.target.value)}/>\n                </label>\n\n                <label>\n                    <p>Enter a password atleast 8 characters long</p>\n                    <input className={validPassword == true ? \"valid\" : \"invalid\"} type=\"text\" onChange={e => setPassword(e.target.value)}/>\n                </label>\n\n                <div>\n                    <button type=\"submit\" onClick={handleSubmit}>Login</button>\n                </div>\n                <div>\n                    <button type=\"submit\" onClick={handleRegister}>Register</button>\n                </div>\n\n            </form>\n\n\n        </div>\n    );\n}","/home/warren/programming/shopify-backend-challenge/frontend/src/config.js",[],"/home/warren/programming/shopify-backend-challenge/frontend/src/image.js",[],{"ruleId":"53","replacedBy":"54"},{"ruleId":"55","replacedBy":"56"},{"ruleId":"57","severity":1,"message":"58","line":11,"column":23,"nodeType":"59","messageId":"60","endLine":11,"endColumn":25},{"ruleId":"57","severity":1,"message":"61","line":22,"column":34,"nodeType":"59","messageId":"60","endLine":22,"endColumn":36},{"ruleId":"57","severity":1,"message":"61","line":26,"column":39,"nodeType":"59","messageId":"60","endLine":26,"endColumn":41},{"ruleId":"62","severity":1,"message":"63","line":31,"column":8,"nodeType":"64","endLine":31,"endColumn":21,"suggestions":"65"},{"ruleId":"57","severity":1,"message":"61","line":43,"column":40,"nodeType":"59","messageId":"60","endLine":43,"endColumn":42},{"ruleId":"62","severity":1,"message":"66","line":28,"column":8,"nodeType":"64","endLine":28,"endColumn":10,"suggestions":"67"},{"ruleId":"68","severity":1,"message":"69","line":1,"column":10,"nodeType":"70","messageId":"71","endLine":1,"endColumn":19},{"ruleId":"57","severity":1,"message":"61","line":126,"column":22,"nodeType":"59","messageId":"60","endLine":126,"endColumn":24},{"ruleId":"57","severity":1,"message":"61","line":141,"column":49,"nodeType":"59","messageId":"60","endLine":141,"endColumn":51},{"ruleId":"57","severity":1,"message":"61","line":146,"column":53,"nodeType":"59","messageId":"60","endLine":146,"endColumn":55},"no-native-reassign",["72"],"no-negated-in-lhs",["73"],"eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","Expected '===' and instead saw '=='.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getState'. Either include it or remove the dependency array. Outer scope values like 'useCallback' aren't valid dependencies because mutating them doesn't re-render the component.","ArrayExpression",["74"],"React Hook useEffect has a missing dependency: 'getState'. Either include it or remove the dependency array.",["75"],"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation",{"desc":"76","fix":"77"},{"desc":"76","fix":"78"},"Update the dependencies array to be: [getState]",{"range":"79","text":"80"},{"range":"81","text":"80"},[782,795],"[getState]",[657,659]]